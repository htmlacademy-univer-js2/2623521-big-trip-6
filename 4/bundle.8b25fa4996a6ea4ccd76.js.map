{"version":3,"file":"bundle.8b25fa4996a6ea4ccd76.js","mappings":"yBAAA,MAAMA,EAGO,YAWb,SAASC,EAAOC,EAAWC,EAAWC,EAAQJ,GAC5CG,EAAUE,sBAAsBD,EAAOF,EAAUI,aACnD,CCde,MAAMC,EACnB,GAAW,KAEX,YAAIC,GACF,MAAM,IAAIC,MAAM,gDAClB,CAEAH,UAAAA,GAIE,OAHKI,MAAK,IACRA,MAAK,EDJX,SAAuBF,GACrB,MAAMG,EAAaC,SAASC,cAAc,OAG1C,OAFAF,EAAWG,UAAYN,EAEhBG,EAAWI,iBACpB,CCDsBF,CAAcH,KAAKF,WAE9BE,MAAK,CACd,CAEAM,aAAAA,GACEN,MAAK,EAAW,IAClB,EChBa,MAAMO,UAAoBV,EACvC,YAAIC,GACF,MAAO,4yCAyBT,EC3Ba,MAAMU,UAAiBX,EACpC,YAAIC,GACF,MAAO,8jCAqBT,ECvBa,MAAMW,UAAqBZ,EACxC,YAAIC,GACF,MAAO,qCACT,ECDa,MAAMY,UAAsBb,EACzC,GACA,GACA,GAEAc,WAAAA,EAAY,MAACC,EAAK,YAAEC,EAAW,OAAEC,IAC/BC,QACAf,MAAK,EAASY,EACdZ,MAAK,EAAea,EACpBb,MAAK,EAAUc,CACjB,CAEA,YAAIhB,GACF,MAAM,KAACkB,EAAI,UAAEC,EAAS,SAAEC,EAAQ,OAAEC,GAAUnB,MAAK,EAC3CoB,EAAkBpB,MAAK,GAAcqB,MAAQ,GAE7CC,EAAQ,IAAIC,KAAKL,GACjBM,EAAM,IAAID,KAAKJ,GAEfM,EAAYH,EAAMI,mBAAmB,QAAS,CAACC,KAAM,UAAWC,OAAQ,YACxEC,EAAUL,EAAIE,mBAAmB,QAAS,CAACC,KAAM,UAAWC,OAAQ,YAEpEE,EAAQR,EAAMS,eAAe,QAAS,CAACD,MAAO,UAAUE,cACxDC,EAAMC,OAAOZ,EAAMa,WAAWC,SAAS,EAAG,KAE1CC,EAAiBrC,MAAK,EAAQsC,OAChC,sGAEKtC,MAAK,EAAQuC,IAAKC,GAAU,6FAESA,EAAMC,yEACED,EAAME,iDAElDC,KAAK,sBAEX,GAEJ,MAAO,sHAGqCzB,MAAaY,KAASG,mJAIvCjB,yFA9CX4B,EAiD4B5B,EAjDnB4B,EAAK,GAAGZ,cAAgBY,EAAKC,MAAM,SAiDJzB,mJAIFF,MAAaO,oFAEfN,MAAWU,sIAKlBZ,kFAInCoB,yMAhEMO,KAyElB,ECzEa,MAAME,UAAqBjD,EACxC,YAAIC,GACF,MAAO,y/DAoCT,ECvCF,IAkBIiD,EAAS,CAACC,EAAO,KACnBC,OAAOC,gBAAgB,IAAIC,WAAWH,IAAOI,OAAO,CAACC,EAAIC,IAGrDD,IAFFC,GAAQ,IACG,GACHA,EAAKC,SAAS,IACXD,EAAO,IACTA,EAAO,IAAIC,SAAS,IAAIvB,cACtBsB,EAAO,GACV,IAEA,KAGP,IC9BL,MAAME,EAAa,CAAC,OAAQ,MAAO,QAAS,OAAQ,QAAS,SAAU,WAAY,cAAe,cAE5FC,EAAe,CACnB,CACEJ,GAAI,QACJhC,KAAM,YACNqC,YAAa,+CACbC,SAAU,CACR,CAAEC,IAAK,mBAAoBF,YAAa,aACxC,CAAEE,IAAK,mBAAoBF,YAAa,qBAG5C,CACEL,GAAI,QACJhC,KAAM,WACNqC,YAAa,6CACbC,SAAU,CACR,CAAEC,IAAK,mBAAoBF,YAAa,eAKxCG,EAAe,CACnBC,KAAM,CACJ,CAAET,GAAI,KAAMZ,MAAO,aAAcC,MAAO,IACxC,CAAEW,GAAI,KAAMZ,MAAO,oBAAqBC,MAAO,KAEjDqB,OAAQ,CACN,CAAEV,GAAI,KAAMZ,MAAO,cAAeC,MAAO,IACzC,CAAEW,GAAI,KAAMZ,MAAO,iBAAkBC,MAAO,OAI1CsB,EAAiBC,GAAUA,EAAMC,KAAKC,MAAMD,KAAKE,SAAWH,EAAM3B,SAElE+B,EAAgBA,KACpB,MAAMrD,EAAOgD,EAAcR,GACrB3C,EAAcmD,EAAcP,GAE5Ba,GADiBT,EAAa7C,IAAS,IACZ6B,MAAM,EAAG,GAAGN,IAAKgC,GAAMA,EAAElB,IAEpDnC,EAAW,IAAIK,KACfJ,EAAS,IAAII,KAAKL,EAASsD,UAAY,MAE7C,MAAO,CACLnB,GAAIN,IACJ/B,OACAyD,cAAe5D,EAAYwC,GAC3BiB,YACArD,UAAW,GACXC,WACAC,SACAuD,YAAY,IClDVC,EAAc,ICJL,MACb,GAAU,GACV,GAAgB,GAChB,GAAgB,CAAC,EAEjBhE,WAAAA,EAAY,OAAEiE,EAAM,aAAEnB,EAAY,aAAEI,IAClC7D,MAAK,EAAU4E,EACf5E,MAAK,EAAgByD,EACrBzD,MAAK,EAAgB6D,CACvB,CAEA,UAAIe,GACF,OAAO5E,MAAK,CACd,CAEA,gBAAIyD,GACF,OAAOzD,MAAK,CACd,CAEA,gBAAI6D,GACF,OAAO7D,MAAK,CACd,CAEA6E,kBAAAA,CAAmBxB,GACjB,OAAOrD,MAAK,EAAc8E,KAAMC,GAAMA,EAAE1B,KAAOA,EACjD,CAEA2B,eAAAA,CAAgBhE,GACd,OAAOhB,MAAK,EAAcgB,IAAS,EACrC,GDzBkC,CAClC4D,ODqDqBK,EAACC,EAAQ,IAAMC,MAAMC,KAAK,CAAE9C,OAAQ4C,GAASb,GCrD1DY,CAAe,GACvBxB,aAAY,EACZI,aAAYA,IAGRwB,EAAY,IEFH,MACb1E,WAAAA,CAAYgE,GACV3E,KAAK2E,YAAcA,EACnB3E,KAAKsF,iBAAmBpF,SAASqF,cAAc,2BAC/CvF,KAAKwF,oBAAsBtF,SAASqF,cAAc,eACpD,CAEAE,IAAAA,GACElG,EAAO,IAAIgB,EAAeP,KAAKsF,iBAAkBhG,GACjDC,EAAO,IAAIiB,EAAYR,KAAKwF,oBAAqBlG,GAEjD,MAAMoG,EAAO,IAAIjF,EACjBlB,EAAOmG,EAAM1F,KAAKwF,oBAAqBlG,GAEvC,MAAMqG,EAAcD,EAAK9F,aAGnBgG,EAAa5F,KAAK2E,YAAYC,OAAO,GAC3CrF,EAAO,IAAIuD,EAAa8C,GAAaD,EXxB3B,cW2BV,IAAK,MAAM/E,KAASZ,KAAK2E,YAAYC,OAAQ,CAC3C,MAAM/D,EAAcb,KAAK2E,YAAYE,mBAAmBjE,EAAM6D,eACxD3D,EAASd,KAAK2E,YAAYK,gBAAgBpE,EAAMI,MACnD6E,OAAQtB,GAAM3D,EAAM0D,UAAUwB,SAASvB,EAAElB,KAE5C9D,EAAO,IAAImB,EAAc,CAACE,QAAOC,cAAaC,WAAU6E,EAAarG,EACvE,CACF,GF1B8BqF,GAChCU,EAAUI,M","sources":["webpack://big-trip/./src/render.js","webpack://big-trip/./src/view/abstract-view.js","webpack://big-trip/./src/view/filters-view.js","webpack://big-trip/./src/view/sort-view.js","webpack://big-trip/./src/view/trip-list-view.js","webpack://big-trip/./src/view/trip-event-view.js","webpack://big-trip/./src/view/edit-form-view.js","webpack://big-trip/./node_modules/nanoid/index.browser.js","webpack://big-trip/./src/mock/mock.js","webpack://big-trip/./src/main.js","webpack://big-trip/./src/model/points-model.js","webpack://big-trip/./src/presenter.js"],"sourcesContent":["const RenderPosition = {\n  BEFOREBEGIN: 'beforebegin',\n  AFTERBEGIN: 'afterbegin',\n  BEFOREEND: 'beforeend',\n  AFTEREND: 'afterend',\n};\n\nfunction createElement(template) {\n  const newElement = document.createElement('div');\n  newElement.innerHTML = template;\n\n  return newElement.firstElementChild;\n}\n\nfunction render(component, container, place = RenderPosition.BEFOREEND) {\n  container.insertAdjacentElement(place, component.getElement());\n}\n\nexport {RenderPosition, createElement, render};\n","import {createElement} from '../render.js';\n\nexport default class AbstractView {\n  #element = null;\n\n  get template() {\n    throw new Error('Abstract method not implemented: get template');\n  }\n\n  getElement() {\n    if (!this.#element) {\n      this.#element = createElement(this.template);\n    }\n    return this.#element;\n  }\n\n  removeElement() {\n    this.#element = null;\n  }\n}\n","import AbstractView from './abstract-view.js';\n\nexport default class FiltersView extends AbstractView {\n  get template() {\n    return `\n      <form class=\"trip-filters\" action=\"#\" method=\"get\">\n        <div class=\"trip-filters__filter\">\n          <input id=\"filter-everything\" class=\"trip-filters__filter-input visually-hidden\" type=\"radio\" name=\"trip-filter\" value=\"everything\" checked>\n          <label class=\"trip-filters__filter-label\" for=\"filter-everything\">Everything</label>\n        </div>\n\n        <div class=\"trip-filters__filter\">\n          <input id=\"filter-future\" class=\"trip-filters__filter-input visually-hidden\" type=\"radio\" name=\"trip-filter\" value=\"future\">\n          <label class=\"trip-filters__filter-label\" for=\"filter-future\">Future</label>\n        </div>\n\n        <div class=\"trip-filters__filter\">\n          <input id=\"filter-present\" class=\"trip-filters__filter-input visually-hidden\" type=\"radio\" name=\"trip-filter\" value=\"present\">\n          <label class=\"trip-filters__filter-label\" for=\"filter-present\">Present</label>\n        </div>\n\n        <div class=\"trip-filters__filter\">\n          <input id=\"filter-past\" class=\"trip-filters__filter-input visually-hidden\" type=\"radio\" name=\"trip-filter\" value=\"past\">\n          <label class=\"trip-filters__filter-label\" for=\"filter-past\">Past</label>\n        </div>\n\n        <button class=\"visually-hidden\" type=\"submit\">Accept filter</button>\n      </form>\n    `;\n  }\n}\n","import AbstractView from './abstract-view';\n\nexport default class SortView extends AbstractView {\n  get template() {\n    return `\n      <form class=\"trip-events__trip-sort  trip-sort\" action=\"#\" method=\"get\">\n        <div class=\"trip-sort__item  trip-sort__item--day\">\n          <input id=\"sort-day\" class=\"trip-sort__input  visually-hidden\" type=\"radio\" name=\"trip-sort\" value=\"sort-day\" checked>\n          <label class=\"trip-sort__btn\" for=\"sort-day\">Day</label>\n        </div>\n\n        <div class=\"trip-sort__item  trip-sort__item--time\">\n          <input id=\"sort-time\" class=\"trip-sort__input  visually-hidden\" type=\"radio\" name=\"trip-sort\" value=\"sort-time\">\n          <label class=\"trip-sort__btn\" for=\"sort-time\">Time</label>\n        </div>\n\n        <div class=\"trip-sort__item  trip-sort__item--price\">\n          <input id=\"sort-price\" class=\"trip-sort__input  visually-hidden\" type=\"radio\" name=\"trip-sort\" value=\"sort-price\">\n          <label class=\"trip-sort__btn\" for=\"sort-price\">Price</label>\n        </div>\n\n        <span class=\"trip-sort__item  trip-sort__item--offer\">Offers</span>\n        <span class=\"trip-sort__item  trip-sort__item--event\">Event</span>\n      </form>\n    `;\n  }\n}\n","import AbstractView from './abstract-view.js';\n\nexport default class TripListView extends AbstractView {\n  get template() {\n    return '<ul class=\"trip-events__list\"></ul>';\n  }\n}\n","import AbstractView from './abstract-view';\n\nconst capitalize = (word) => word[0].toUpperCase() + word.slice(1);\n\nexport default class TripEventView extends AbstractView {\n  #point;\n  #destination;\n  #offers;\n\n  constructor({point, destination, offers}) {\n    super();\n    this.#point = point;\n    this.#destination = destination;\n    this.#offers = offers;\n  }\n\n  get template() {\n    const {type, basePrice, dateFrom, dateTo} = this.#point;\n    const destinationName = this.#destination?.name ?? '';\n\n    const start = new Date(dateFrom);\n    const end = new Date(dateTo);\n\n    const startTime = start.toLocaleTimeString('en-GB', {hour: '2-digit', minute: '2-digit'});\n    const endTime = end.toLocaleTimeString('en-GB', {hour: '2-digit', minute: '2-digit'});\n\n    const month = start.toLocaleString('en-US', {month: 'short'}).toUpperCase();\n    const day = String(start.getDate()).padStart(2, '0');\n\n    const offersTemplate = this.#offers.length\n      ? `<h4 class=\"visually-hidden\">Offers:</h4>\n         <ul class=\"event__selected-offers\">\n           ${this.#offers.map((offer) => `\n             <li class=\"event__offer\">\n               <span class=\"event__offer-title\">${offer.title}</span>\n               +€&nbsp;<span class=\"event__offer-price\">${offer.price}</span>\n             </li>\n           `).join('')}\n         </ul>`\n      : '';\n\n    return `\n      <li class=\"trip-events__item\">\n        <div class=\"event\">\n          <time class=\"event__date\" datetime=\"${dateFrom}\">${month} ${day}</time>\n\n          <div class=\"event__type\">\n            <img class=\"event__type-icon\" width=\"42\" height=\"42\"\n              src=\"img/icons/${type}.png\" alt=\"Event type icon\">\n          </div>\n\n          <h3 class=\"event__title\">${capitalize(type)} to ${destinationName}</h3>\n\n          <div class=\"event__schedule\">\n            <p class=\"event__time\">\n              <time class=\"event__start-time\" datetime=\"${dateFrom}\">${startTime}</time>\n              —\n              <time class=\"event__end-time\" datetime=\"${dateTo}\">${endTime}</time>\n            </p>\n          </div>\n\n          <p class=\"event__price\">\n            € <span class=\"event__price-value\">${basePrice}</span>\n          </p>\n\n          <div class=\"event__offers\">\n            ${offersTemplate}\n          </div>\n\n          <button class=\"event__rollup-btn\" type=\"button\">\n            <span class=\"visually-hidden\">Open event</span>\n          </button>\n        </div>\n      </li>\n    `;\n  }\n}\n","import AbstractView from './abstract-view';\n\nexport default class EditFormView extends AbstractView {\n  get template() {\n    return `\n      <li class=\"trip-events__item\">\n        <form class=\"event event--edit\" action=\"#\" method=\"post\">\n          <header class=\"event__header\">\n            <div class=\"event__type-wrapper\">\n              <label class=\"event__type  event__type-btn\" for=\"event-type-toggle-1\">\n                <span class=\"visually-hidden\">Choose event type</span>\n                <img class=\"event__type-icon\" width=\"17\" height=\"17\" src=\"img/icons/taxi.png\" alt=\"Event type icon\">\n              </label>\n              <input class=\"event__type-toggle visually-hidden\" id=\"event-type-toggle-1\" type=\"checkbox\">\n            </div>\n\n            <div class=\"event__field-group  event__field-group--destination\">\n              <label class=\"event__label  event__type-output\" for=\"event-destination-1\">Taxi</label>\n              <input class=\"event__input  event__input--destination\" id=\"event-destination-1\" type=\"text\" name=\"event-destination\" value=\"Amsterdam\">\n            </div>\n\n            <div class=\"event__field-group  event__field-group--time\">\n              <label class=\"visually-hidden\" for=\"event-start-time-1\">From</label>\n              <input class=\"event__input  event__input--time\" id=\"event-start-time-1\" type=\"text\" name=\"event-start-time\" value=\"10:30\">\n              —\n              <label class=\"visually-hidden\" for=\"event-end-time-1\">To</label>\n              <input class=\"event__input  event__input--time\" id=\"event-end-time-1\" type=\"text\" name=\"event-end-time\" value=\"11:00\">\n            </div>\n\n            <div class=\"event__field-group  event__field-group--price\">\n              <label class=\"event__label\" for=\"event-price-1\">€</label>\n              <input class=\"event__input  event__input--price\" id=\"event-price-1\" type=\"text\" name=\"event-price\" value=\"20\">\n            </div>\n\n            <button class=\"event__save-btn  btn  btn--blue\" type=\"submit\">Save</button>\n            <button class=\"event__reset-btn\" type=\"reset\">Delete</button>\n          </header>\n        </form>\n      </li>\n    `;\n  }\n}\n","import { urlAlphabet } from './url-alphabet/index.js'\nlet random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nlet customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step | 0\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nlet customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nlet nanoid = (size = 21) =>\n  crypto.getRandomValues(new Uint8Array(size)).reduce((id, byte) => {\n    byte &= 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte > 62) {\n      id += '-'\n    } else {\n      id += '_'\n    }\n    return id\n  }, '')\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n","import { nanoid } from 'nanoid';\n\nconst pointTypes = ['taxi', 'bus', 'train', 'ship', 'drive', 'flight', 'check-in', 'sightseeing', 'restaurant'];\n\nconst destinations = [\n  {\n    id: 'dest1',\n    name: 'Amsterdam',\n    description: 'Amsterdam is the capital of the Netherlands.',\n    pictures: [\n      { src: 'img/photos/1.jpg', description: 'Amsterdam' },\n      { src: 'img/photos/2.jpg', description: 'Amsterdam canal' }\n    ],\n  },\n  {\n    id: 'dest2',\n    name: 'Chamonix',\n    description: 'Chamonix is a resort area near Mont Blanc.',\n    pictures: [\n      { src: 'img/photos/3.jpg', description: 'Chamonix' }\n    ],\n  },\n];\n\nconst offersByType = {\n  taxi: [\n    { id: 'o1', title: 'Order Uber', price: 20 },\n    { id: 'o2', title: 'Switch to comfort', price: 80 },\n  ],\n  flight: [\n    { id: 'o3', title: 'Add luggage', price: 50 },\n    { id: 'o4', title: 'Business class', price: 120 },\n  ],\n};\n\nconst getRandomItem = (items) => items[Math.floor(Math.random() * items.length)];\n\nconst generatePoint = () => {\n  const type = getRandomItem(pointTypes);\n  const destination = getRandomItem(destinations);\n  const possibleOffers = offersByType[type] ?? [];\n  const offersIds = possibleOffers.slice(0, 1).map((o) => o.id);\n\n  const dateFrom = new Date();\n  const dateTo = new Date(dateFrom.getTime() + 30 * 60 * 1000);\n\n  return {\n    id: nanoid(),\n    type,\n    destinationId: destination.id,\n    offersIds,\n    basePrice: 20,\n    dateFrom,\n    dateTo,\n    isFavorite: false,\n  };\n};\n\nconst generatePoints = (count = 3) => Array.from({ length: count }, generatePoint);\n\nexport { destinations, offersByType, generatePoints };\n","import Presenter from './presenter.js';\nimport PointsModel from './model/points-model.js';\nimport { destinations, offersByType, generatePoints } from './mock/mock.js';\n\nconst pointsModel = new PointsModel({\n  points: generatePoints(3),\n  destinations,\n  offersByType,\n});\n\nconst presenter = new Presenter(pointsModel);\npresenter.init();\n","export default class PointsModel {\n  #points = [];\n  #destinations = [];\n  #offersByType = {};\n\n  constructor({ points, destinations, offersByType }) {\n    this.#points = points;\n    this.#destinations = destinations;\n    this.#offersByType = offersByType;\n  }\n\n  get points() {\n    return this.#points;\n  }\n\n  get destinations() {\n    return this.#destinations;\n  }\n\n  get offersByType() {\n    return this.#offersByType;\n  }\n\n  getDestinationById(id) {\n    return this.#destinations.find((d) => d.id === id);\n  }\n\n  getOffersByType(type) {\n    return this.#offersByType[type] ?? [];\n  }\n}\n","import {render, RenderPosition} from './render.js';\n\nimport FiltersView from './view/filters-view.js';\nimport SortView from './view/sort-view.js';\nimport TripListView from './view/trip-list-view.js';\nimport TripEventView from './view/trip-event-view.js';\nimport EditFormView from './view/edit-form-view.js';\n\nexport default class Presenter {\n  constructor(pointsModel) {\n    this.pointsModel = pointsModel;\n    this.filtersContainer = document.querySelector('.trip-controls__filters');\n    this.tripEventsContainer = document.querySelector('.trip-events');\n  }\n\n  init() {\n    render(new FiltersView(), this.filtersContainer, RenderPosition.BEFOREEND);\n    render(new SortView(), this.tripEventsContainer, RenderPosition.BEFOREEND);\n\n    const list = new TripListView();\n    render(list, this.tripEventsContainer, RenderPosition.BEFOREEND);\n\n    const listElement = list.getElement();\n\n    // Edit form primero (como antes)\n    const firstPoint = this.pointsModel.points[0];\n    render(new EditFormView(firstPoint), listElement, RenderPosition.AFTERBEGIN);\n\n    // Render puntos desde el model\n    for (const point of this.pointsModel.points) {\n      const destination = this.pointsModel.getDestinationById(point.destinationId);\n      const offers = this.pointsModel.getOffersByType(point.type)\n        .filter((o) => point.offersIds.includes(o.id));\n\n      render(new TripEventView({point, destination, offers}), listElement, RenderPosition.BEFOREEND);\n    }\n  }\n}\n"],"names":["RenderPosition","render","component","container","place","insertAdjacentElement","getElement","AbstractView","template","Error","this","newElement","document","createElement","innerHTML","firstElementChild","removeElement","FiltersView","SortView","TripListView","TripEventView","constructor","point","destination","offers","super","type","basePrice","dateFrom","dateTo","destinationName","name","start","Date","end","startTime","toLocaleTimeString","hour","minute","endTime","month","toLocaleString","toUpperCase","day","String","getDate","padStart","offersTemplate","length","map","offer","title","price","join","word","slice","EditFormView","nanoid","size","crypto","getRandomValues","Uint8Array","reduce","id","byte","toString","pointTypes","destinations","description","pictures","src","offersByType","taxi","flight","getRandomItem","items","Math","floor","random","generatePoint","offersIds","o","getTime","destinationId","isFavorite","pointsModel","points","getDestinationById","find","d","getOffersByType","generatePoints","count","Array","from","presenter","filtersContainer","querySelector","tripEventsContainer","init","list","listElement","firstPoint","filter","includes"],"sourceRoot":""}